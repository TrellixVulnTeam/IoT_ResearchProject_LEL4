
    




    
\documentclass[11pt]{article}

    
    \usepackage[breakable]{tcolorbox}
    \tcbset{nobeforeafter} % prevents tcolorboxes being placing in paragraphs
    \usepackage{float}
    \floatplacement{figure}{H} % forces figures to be placed at the correct location
    
    \usepackage[T1]{fontenc}
    % Nicer default font (+ math font) than Computer Modern for most use cases
    \usepackage{mathpazo}

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % We will generate all images so they have a width \maxwidth. This means
    % that they will get their normal width if they fit onto the page, but
    % are scaled down if they would overflow the margins.
    \makeatletter
    \def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth
    \else\Gin@nat@width\fi}
    \makeatother
    \let\Oldincludegraphics\includegraphics
    % Set max figure width to be 80% of text width, for now hardcoded.
    \renewcommand{\includegraphics}[1]{\Oldincludegraphics[width=.8\maxwidth]{#1}}
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionLabelFormat{nolabel}{}
    \captionsetup{labelformat=nolabel}

    \usepackage{adjustbox} % Used to constrain images to a maximum size 
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro
    \usepackage[mathletters]{ucs} % Extended unicode (utf-8) support
    \usepackage[utf8x]{inputenc} % Allow utf-8 characters in the tex document
    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics 
                         % to support a larger range 
    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    \usepackage{mathrsfs}
    

    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}
    \definecolor{ansi-default-inverse-fg}{HTML}{FFFFFF}
    \definecolor{ansi-default-inverse-bg}{HTML}{000000}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}
    
    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    
    
    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatibility definitions
    \def\gt{>}
    \def\lt{<}
    \let\Oldtex\TeX
    \let\Oldlatex\LaTeX
    \renewcommand{\TeX}{\textrm{\Oldtex}}
    \renewcommand{\LaTeX}{\textrm{\Oldlatex}}
    % Document parameters
    % Document title
    \title{Final}
    
    
    
    
    
% Pygments definitions
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\expandafter\def\csname PY@tok@w\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PY@tok@c\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\expandafter\def\csname PY@tok@k\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\expandafter\def\csname PY@tok@o\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ow\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@nb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@ne\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\expandafter\def\csname PY@tok@nv\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@no\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@nl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@ni\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\expandafter\def\csname PY@tok@na\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\expandafter\def\csname PY@tok@nt\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@s\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sd\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@si\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@se\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\expandafter\def\csname PY@tok@sr\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@ss\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sx\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@m\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@gh\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gu\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@gi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@gr\endcsname{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@ge\endcsname{\let\PY@it=\textit}
\expandafter\def\csname PY@tok@gs\endcsname{\let\PY@bf=\textbf}
\expandafter\def\csname PY@tok@gp\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@go\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\expandafter\def\csname PY@tok@gt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PY@tok@err\endcsname{\def\PY@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PY@tok@kc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kd\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kr\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@bp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@fm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@vc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vg\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sa\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@dl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s2\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s1\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@mb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@il\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mo\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ch\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cm\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cpf\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@c1\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cs\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % For linebreaks inside Verbatim environment from package fancyvrb. 
    \makeatletter
        \newbox\Wrappedcontinuationbox 
        \newbox\Wrappedvisiblespacebox 
        \newcommand*\Wrappedvisiblespace {\textcolor{red}{\textvisiblespace}} 
        \newcommand*\Wrappedcontinuationsymbol {\textcolor{red}{\llap{\tiny$\m@th\hookrightarrow$}}} 
        \newcommand*\Wrappedcontinuationindent {3ex } 
        \newcommand*\Wrappedafterbreak {\kern\Wrappedcontinuationindent\copy\Wrappedcontinuationbox} 
        % Take advantage of the already applied Pygments mark-up to insert 
        % potential linebreaks for TeX processing. 
        %        {, <, #, %, $, ' and ": go to next line. 
        %        _, }, ^, &, >, - and ~: stay at end of broken line. 
        % Use of \textquotesingle for straight quote. 
        \newcommand*\Wrappedbreaksatspecials {% 
            \def\PYGZus{\discretionary{\char`\_}{\Wrappedafterbreak}{\char`\_}}% 
            \def\PYGZob{\discretionary{}{\Wrappedafterbreak\char`\{}{\char`\{}}% 
            \def\PYGZcb{\discretionary{\char`\}}{\Wrappedafterbreak}{\char`\}}}% 
            \def\PYGZca{\discretionary{\char`\^}{\Wrappedafterbreak}{\char`\^}}% 
            \def\PYGZam{\discretionary{\char`\&}{\Wrappedafterbreak}{\char`\&}}% 
            \def\PYGZlt{\discretionary{}{\Wrappedafterbreak\char`\<}{\char`\<}}% 
            \def\PYGZgt{\discretionary{\char`\>}{\Wrappedafterbreak}{\char`\>}}% 
            \def\PYGZsh{\discretionary{}{\Wrappedafterbreak\char`\#}{\char`\#}}% 
            \def\PYGZpc{\discretionary{}{\Wrappedafterbreak\char`\%}{\char`\%}}% 
            \def\PYGZdl{\discretionary{}{\Wrappedafterbreak\char`\$}{\char`\$}}% 
            \def\PYGZhy{\discretionary{\char`\-}{\Wrappedafterbreak}{\char`\-}}% 
            \def\PYGZsq{\discretionary{}{\Wrappedafterbreak\textquotesingle}{\textquotesingle}}% 
            \def\PYGZdq{\discretionary{}{\Wrappedafterbreak\char`\"}{\char`\"}}% 
            \def\PYGZti{\discretionary{\char`\~}{\Wrappedafterbreak}{\char`\~}}% 
        } 
        % Some characters . , ; ? ! / are not pygmentized. 
        % This macro makes them "active" and they will insert potential linebreaks 
        \newcommand*\Wrappedbreaksatpunct {% 
            \lccode`\~`\.\lowercase{\def~}{\discretionary{\hbox{\char`\.}}{\Wrappedafterbreak}{\hbox{\char`\.}}}% 
            \lccode`\~`\,\lowercase{\def~}{\discretionary{\hbox{\char`\,}}{\Wrappedafterbreak}{\hbox{\char`\,}}}% 
            \lccode`\~`\;\lowercase{\def~}{\discretionary{\hbox{\char`\;}}{\Wrappedafterbreak}{\hbox{\char`\;}}}% 
            \lccode`\~`\:\lowercase{\def~}{\discretionary{\hbox{\char`\:}}{\Wrappedafterbreak}{\hbox{\char`\:}}}% 
            \lccode`\~`\?\lowercase{\def~}{\discretionary{\hbox{\char`\?}}{\Wrappedafterbreak}{\hbox{\char`\?}}}% 
            \lccode`\~`\!\lowercase{\def~}{\discretionary{\hbox{\char`\!}}{\Wrappedafterbreak}{\hbox{\char`\!}}}% 
            \lccode`\~`\/\lowercase{\def~}{\discretionary{\hbox{\char`\/}}{\Wrappedafterbreak}{\hbox{\char`\/}}}% 
            \catcode`\.\active
            \catcode`\,\active 
            \catcode`\;\active
            \catcode`\:\active
            \catcode`\?\active
            \catcode`\!\active
            \catcode`\/\active 
            \lccode`\~`\~ 	
        }
    \makeatother

    \let\OriginalVerbatim=\Verbatim
    \makeatletter
    \renewcommand{\Verbatim}[1][1]{%
        %\parskip\z@skip
        \sbox\Wrappedcontinuationbox {\Wrappedcontinuationsymbol}%
        \sbox\Wrappedvisiblespacebox {\FV@SetupFont\Wrappedvisiblespace}%
        \def\FancyVerbFormatLine ##1{\hsize\linewidth
            \vtop{\raggedright\hyphenpenalty\z@\exhyphenpenalty\z@
                \doublehyphendemerits\z@\finalhyphendemerits\z@
                \strut ##1\strut}%
        }%
        % If the linebreak is at a space, the latter will be displayed as visible
        % space at end of first line, and a continuation symbol starts next line.
        % Stretch/shrink are however usually zero for typewriter font.
        \def\FV@Space {%
            \nobreak\hskip\z@ plus\fontdimen3\font minus\fontdimen4\font
            \discretionary{\copy\Wrappedvisiblespacebox}{\Wrappedafterbreak}
            {\kern\fontdimen2\font}%
        }%
        
        % Allow breaks at special characters using \PYG... macros.
        \Wrappedbreaksatspecials
        % Breaks at punctuation characters . , ; ? ! and / need catcode=\active 	
        \OriginalVerbatim[#1,codes*=\Wrappedbreaksatpunct]%
    }
    \makeatother

    % Exact colors from NB
    \definecolor{incolor}{HTML}{303F9F}
    \definecolor{outcolor}{HTML}{D84315}
    \definecolor{cellborder}{HTML}{CFCFCF}
    \definecolor{cellbackground}{HTML}{F7F7F7}
    
    % prompt
    \newcommand{\prompt}[4]{
        \llap{{\color{#2}[#3]: #4}}\vspace{-1.25em}
    }
    

    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy 
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    
    

    \begin{document}
    
    
    \maketitle
    
    

    
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{1}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{from} \PY{n+nn}{IPython} \PY{k}{import} \PY{n}{get\PYZus{}ipython}\PY{p}{;}   
\PY{n}{get\PYZus{}ipython}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{magic}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{reset \PYZhy{}sf}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{c+c1}{\PYZsh{}https://github.com/kirbs\PYZhy{}/hide\PYZus{}code}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{2}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i Packages.py
\PY{o}{\PYZpc{}}\PY{k}{matplotlib} inline
\PY{o}{\PYZpc{}}\PY{k}{load\PYZus{}ext} rpy2.ipython
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{3}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}\PYZpc{}}\PY{k}{R}
library(ggplot2)
library(readr)
library(lubridate)
library(dplyr)
library(tidyr)
library(viridis)
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{abstract}{%
\section{Abstract}\label{abstract}}

    \hypertarget{background}{%
\section{Background}\label{background}}

    \hypertarget{electricity-usage}{%
\subsection{Electricity Usage}\label{electricity-usage}}

    \begin{itemize}
\tightlist
\item
  Two ways of looking at this
\end{itemize}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Internet = lots of electricity
\item
  Internet can save vast amounts of electricity
\end{enumerate}

{[}@article\{itu2018\}NOT IN LIB{]} In 2015, the International
Telecommunication Union estimated about 3.2 billion people, or almost
half of the world's population, would be online by the end of the year.

{[}@article\{haseeb2019does\}NOT IN LIB{]} examined the impact of ICTs
(i.e., internet usage and mobile cellular subscriptions), globalization,
electricity consumption, financial development, and economic growth on
environmental quality by using 1994--2014 panel data of BRICS economies.
\ldots{} The empirical results demonstrate that rise in both internet
usage and mobile cellular subscription (ICTs) likely mitigates CO2
emissions in BRICS economies.

{[}@article\{feuerriegel2016\}{]} discuss electricity demand response -
allowing the management of demand side resources in real-time.

\emph{Demand Response allows for the management of demand side resources
in real-time; i.e.~shifting electricity demand according to fluctuating
supply. When integrated into electricity markets, Demand Response can be
used for load shifting and as a replacement for both control reserve and
balancing energy. These three usage scenarios are compared based on
historic German data from 2011 to determine that load shifting provides
the highest benefit: its annual financial savings accumulate to â‚¬3.110M
for both households and the service sector. This equals to relative
savings of 2.83\% compared to a scenario without load shifting.}

\& {[}@article\{palensky2011demand\}NOT IN LIB{]}

Talk broadly about - Internet - End Users (household demand for
electricity) - IoT

{[}@article\{bober2009distributed\}NOT IN LIB{]} - As recently as 2009
it was posited that ``The proposed model allows for introduction of
power priorities for consumer's electrical-equipments by the importance
of their functions. The relevance of the functions carried out by the
data device is evaluated by each consumer individually. The relevance of
functions and priorities assigned to power mode / groups of electrical
equipments can be changed over time.''

`Haseeb et al {[}@article\{haseeb2019does\}NOT IN LIB{]} have (through
review) shown that at a macro scale, global adoption of internet reduces
energy consumption' + At the micro scale (that is, the behavior of
individuals\ldots)

Consider COST OF IOT SERVICES??? Link this back to the aformentioned
increased in global internet users

Pivot into micro - end users\ldots{} As previously mentioned, demand
shifting

HMI = Human-Machine Interface

`How smart do smart meters need to be?' - this is fundamentally at odds
with the vision described above. In this scenario, end users would still
be having to interact with HMIs. - From a behavioural point of view,
moving forward this type of behaviour will become increasingly
anachronistic (think about tuning a television set) - Additionally,
there is associated resouce (time of end user \& physical resource to
make the HMI) which contributes to environmental burden (this is a NULL
point, as authors specifically mention interaction via a tablet
computer) ALTHOUGH, the point can still be made that interaction with

(J.-S. Chou and N.-S. Truong) posit that `A user's ignorance of methods
for saving energy is generally attributable to a lack of relevant
feedback.'

Review of available literature (bad?) has shown that currently, consumer
convenience and consumer energy consumption are considered in relative
isolation from one-another (detached, disjoined). For example, analysis
of texts X Y Z yield only T mention of convenience, whilst analysis of
texts A B C yield only S mentions of energy consumption.

This work aims to `bridge the gap' between these two areas of
consideration.

Bring it back to the idea that previous forecasting / intervention
models have focussed on

@article\{huang2018\} dis

@article\{kobus2015\} et al contend that \emph{Today's major
developments in the production and demand of electricity in domestic
areas make it increasingly important that domestic electricity demand
can respond to the availability of electricity}. They also note that
\emph{the benefits resulting from domestic demand response depend on
household acceptance and behavioural change} - Aim is to investigate if
households can shift their electricity demand to times when electricity
is abundantly available - Two major developments in the coming decades
1. The amount of distributed renewable electricity generation will
increase (e.g., growing number of installed photovoltaic (PV) panels) 2.
Significant increase in electricity demand - due to widespread
introduction of energy-reliant (albeit more efficient) technologies

Smart grids: Consideration of power greid in real time to drive
efficiency in the power grid at a macro-level (NOT: We will define macro
as \ldots) ADD PROPER DEFINITION for SMARTGRID HOWEVER \emph{the effects
of smart grids strongly depend on the successful implementation of
demand response programs} Demand Response = \emph{Demand response as a
household action (automated, manual, orboth) due to which electricity
use is shifted in time in response to a price signal or other stimuli.}
Factors - Availability of PV electricity - Availability of other
renewable energy - `Peak' electricity grid time (this may vary) -
Weather / climate considerations (e.g., heatwave) - Interaction with
Energy Management System (EMS)

\emph{An example of a price signal that several countries have in place
is aday- and night pricing scheme. In this scheme, electricity is
cheaperduring the night, when demand is low.} \emph{Households were also
equipped with PV panels, an Energy Management System (EMS), and a
dynamic tariff.} DEMAND RESPONSE - `Demand response of a household'

\emph{The usage of wet appliances, such as dishwashers, washing machines
and dryers, is in general not very time critical and therefore can be
shifted.}

\emph{The user defines an ultimate finish time and within this time
frame, the smart applianceautomatically defines the most appropriate
starting time}

*Overall - concept that `end user' will mediate power consumption
between various appliances\ldots{}

\textbf{Based on Darby and McKenna (REF), we define demand response and
a household action (automated, manual, or both) due to which electricity
use is shifted in time in response to a price signal of other stimuli.
This can result in more efficient usage of the available sustainable
electricity, like self-consumption of on-site PV electricity (REF) and
peak demand reductions (REF) - all from @article\{kobus2015\}}

\textbf{Assumptions} 1. The cost of the sensors is negligible (EXCEPT
for discussion later RE top 5 features) 2. The energy requirement for
the sensors is negligible 3. In our proposed model, computation is
performed in the cloud 4. An app is available to interact with the smart
home 5. All of the electrical appliances in our smart home can be remote
controlled to some extent

\begin{itemize}
\tightlist
\item
  What about, instead of responding to the average time, the
  antagonistic AI responded to price signals in the market?
\end{itemize}

**Huang et al proposed a novel service mining framework to personalize
services in an IoT based smart home (REF).



\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{general-iot-internet}{%
\subsection{General IoT + Internet}\label{general-iot-internet}}

    Since the inception of the first home computers in 1977 (REF), modern
society has become utterly dependent on and indeed, inexorably bound to
digital technology. The rapid and widespread adoption of computational
technology has led to the fastest rate of development (societal,
economic, e.t.c.,) our species has ever experienced. Indeed, our quest
for exponentially greater computational power and digital storage
capacity has led to a new and utterly ubiquitous technological paradigm;
Cloud Computing (REF), defined as; The practice of using a network of
remote servers hosted on the Internet to store, manage, and process
data, rather than a local server or a personal computer
(https://www.dictionary.com/browse/cloud-computing).

Cloud Computing (enabled by the adoption of another ubiquitous
computational technology, the World Wide Web) essentially commodifies
compute and store, providing on-demand resources for anything from
making a social media post, all the way to, searching the Milky Way
Galaxy for new planets
(https://mast-labs.stsci.io/2018/12/tess-data-available-on-aws).

As with any new technology, Cloud Computing brings with it both new
opportunities and new challenges. One such opportunity is the Internet
of Things (BRIDGING STATEMENT). The `Internet of Things' can be surmised
as the extension of the Internet and the Web into the physical realm, by
means of the widespread deployment of spatially distributed devices with
embedded identification, sensing and/or actuation capabilities
{[}@article\{miorandi2012\}{]}.

The Internet of Things (IoT) paradigm enables physical devices to
connect and exchange information, and also allows objects to be sensed
or controlled remotely through the internet (@article\{huang2018\} @ 1
of @article\{huang2018\}). Huang et al explore the idea of
Service-oriented Computing (SOC) whereby the inherent complexity
associated with networking and programming is abstracted away, shifting
the focus from dealing with technical details to a focus on how the
services are to be used. For example, under this paradigm, a light
connected to the Internet is represented as a light service or a heater
connected to the internet is represented as a heating service\ldots{}
`realm of smart home'\ldots{} A smart home can be considered as any
regular home which has been augmented with various types of IoT
services, the purpose of which is to make residents' life more
convenient and efficient (@article\{huang2018\} @ 15/17 of
@article\{huang2018\}).

\textbf{Discuss IoT} \emph{The term ``Internet-of-Things'' is used as an
umbrella keyword for covering various aspects related to the extension
of the Internet and the Web into the physical realm, by means ofthe
widespread deployment of spatially distributed devices with embedded
identification,sensing and/or actuation capabilities. Internet-of-Things
envisions a future in which digitaland physical entities can be linked,
by means of appropriate information and communica-tion technologies, to
enable a whole new class of applications and services. In this
article,we present a survey of technologies, applications and research
challenges for Internet-of-Things}

{[}IMAGE - Old Paradigm = user sitting at computer terminal{]} {[}IMAGE
- New Paradigm = user surrounded by services{]}

This work aims to bridge the gap between CONVENIENCE and ENERGY USAGE, a
previously neglected consideration (these two haven't been directly
considered side-by-side, as it were)

Here we observe that the internet is evolving from interconnecting
computers to interconnecting things {[}@article\{atzori2010\}{]}.

The Internet of Things (IoT) paradigm enables physical devices to
connect and exchange information. IoT devices allow objects to be sensed
or con-trolled remotely through the Internet
{[}@article\{atzori2010\}{]}. 

    

    \hypertarget{datasets}{%
\subsection{Datasets}\label{datasets}}

    The datasets were created during the thesis \emph{Activity Recognition
with End-User Sensor Installation in the Home} by Randy Joseph
Rockinson, Submitted to the Program of Media Arts and Sciences, School
of Architecture and Planning, in partial fulfillment of the requirement
for the degree of Master of Science in Media Arts and Sciences at the
Massachusetts Institute of Technology (MIT) February 2008
. The work considered the effect of end user
versus professional installation of a sensor array in the home - on the
basis that, if installation of sensors is to be considered as a high
initial cost, and a barrier to entry for end users wanting this
technology, is there a difference if a professional versus an end user
performs the installation?

\begin{itemize}
\tightlist
\item
  End user installation method is prposed using ``stick on'' wireless
  sensors
\item
  Wireless sensors in the home environment
\item
  Data collected from such sensors can be used by software to
  automatically infer context, such as the activities of daily living.
\item
  This context inference can then be exploited in novel applications for
  health-care, communication, education, and entertainment.
\item
  Determination of
\end{itemize}

In this thesis, between 80-100 reed switch sensors where installed in
two single-person apartments collecting data about human activity for
two weeks. The sensors were installed in everyday objects such as
drawers, refrigerators, containers, etc to record opening-closing events
(activation deactivation events) as the subject carried out everyday
activities.

\textbf{Based on the two explorator}

\textbf{The PlaceLab} The mission of House\_n is to conduct research by
designing and building real living environments - ``living labs'' - that
are used to study technology and design strategies in context. The
PlaceLab is a joint MIT and TIAX, LLC initiative. It is a residential
condominium in Cambridge, Massachusetts

GET WEATHER DATA

    \hypertarget{previous-work}{%
\subsection{Previous Work}\label{previous-work}}

    This text is italic. Fig 1. DESCRIBE

This text is italic. Fig 1. The work of Huang et al provided initial
direction for our data preprocessing. Because we had NO INFORMATION / IT
IS A TINY APARTMENT - JUSTIFY the reason for alternate approach RE data
processing

\begin{equation}
S = 
<Seq,T,L> = 
 \begin{Bmatrix}
  \alpha_{1} & \cdots & \alpha_{i} & \cdots & \alpha_{2n} \\
  t_{1}      & \cdots & t_{i}      & \cdots & t_{2n}      \\
  l_{1}      & \cdots & l_{i}      & \cdots & l_{2n}      \\
 \end{Bmatrix}
\end{equation}

\begin{equation}
 \begin{Bmatrix}
  s_{2}^{+} & s_{1}^{+} & s_{3}^{+} & s_{1}^{-} & s_{3}^{-} & s_{2}^{-} \\
  48        & 50        & 58        & 65        & 70        & 75        \\
  l_{2}     & l_{1}     & l_{3}     & l_{1}     & l_{3}     & l_{2}     \\
 \end{Bmatrix}
 (i.e., l_{1} = (1,2), l_{2} = (2,4), l_{3} = (3,5))
\end{equation}

    \hypertarget{data-preprocessing-and-visualisation}{%
\section{Data Preprocessing and
Visualisation}\label{data-preprocessing-and-visualisation}}

    \hypertarget{importing-preprocessing-the-activities-meta-data}{%
\subsection{Importing \& Preprocessing the Activities Meta
Data}\label{importing-preprocessing-the-activities-meta-data}}

    The dataset \texttt{S1Activities.csv} was imported into the Jupyter
interactive environment. These data contains a tabulated summary of
Heading, Category, Subcategory and a corresponding code. After
importation, the dataset has dimensionality of {[}3, 33{]}, with
\texttt{Heading}, \texttt{Category} \& \texttt{Subcategory} present as
non-null objects. The attribute \texttt{Code} (which codefies the unique
set of Heading, Category) was imported as an index value. At this time,
the activities data will not be subject to preprocessing.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{4}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ds} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{PATH} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{/datasets/S1Activities.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{index\PYZus{}col} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Code}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} 
\PY{n}{ds}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{n}{n}\PY{o}{=}\PY{l+m+mi}{5}\PY{p}{)}  
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, boxrule=.5pt, size=fbox, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{4}{\hspace{3.5pt}}
\begin{Verbatim}[commandchars=\\\{\}]
                 Heading                 Category        Subcategory
Code
1     Employment related  Employment work at home       Work at home
5     Employment related        Travel employment  Going out to work
10        Personal needs                   Eating             Eating
15        Personal needs         Personal hygiene          Toileting
20        Personal needs         Personal hygiene            Bathing
\end{Verbatim}
\end{tcolorbox}
        
    \hypertarget{importing-preprocessing-the-sensor-meta-data}{%
\subsection{Importing \& Preprocessing the Sensor Meta
Data}\label{importing-preprocessing-the-sensor-meta-data}}

    The dataset \texttt{S1sensors.csv} was imported into the Jupyter
interactive environment. These data contains a tabulated values for
Sensor ID, Room and Sensor Activity Type, with no header row present in
the original dataset. After importation, the dataset has dimensionality
of {[}3, 76{]}, with header \texttt{0}, \texttt{1} \& \texttt{2}
corresponding to \texttt{SensorID}, \texttt{Room} \&
\texttt{Sensor\ Activity\ Type}, respectively. All attributes are
nominal, and were imported as dtype str, accordingly. Note that it can
be immediately seen (\texttt{dsS1Sensors.head()}) that attribute
\texttt{1} \& \texttt{2} contain degenerate values. This will be
addressed in the subsequent data preprocessing.

The preprocessing of the sensor data is a critical step in our analysis.
Careful consideration of the data, including the presence of duplicates.
This is because if we dont have a sufficient understanding of where and
why duplicates exist, we will not be able to satisfactorarily preprocess
them. Failure to do so we mean that there is potentail degeneracy in our
source dataset, leading to unknown issues with our downstream analysis.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{5}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} Importing the dataset}
\PY{n}{dsS1Sensors} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{PATH} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{/datasets/S1sensors.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
                          \PY{n}{dtype}\PY{o}{=}\PY{p}{\PYZob{}}\PY{l+m+mi}{0}\PY{p}{:}\PY{n+nb}{str}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{:}\PY{n+nb}{str}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{:}\PY{n+nb}{str}\PY{p}{\PYZcb{}}\PY{p}{,}
                          \PY{n}{index\PYZus{}col} \PY{o}{=} \PY{k+kc}{None}\PY{p}{,} \PY{n}{header} \PY{o}{=} \PY{k+kc}{None}\PY{p}{)}
\PY{n}{dsS1Sensors}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, boxrule=.5pt, size=fbox, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{5}{\hspace{3.5pt}}
\begin{Verbatim}[commandchars=\\\{\}]
     0         1              2
0  100  Bathroom  Toilet Flush
1  101  Bathroom   Light switch
2  104     Foyer   Light switch
3  105   Kitchen   Light switch
4  106   Kitchen         Burner
\end{Verbatim}
\end{tcolorbox}
        
    Column {[}1{]} \& Column {[}2{]} of the sensor data will be
concatenated, whitespace will be removed, all text will be cast to
lowercase and a final whitespace strip will be performed. The python
script \texttt{S1sensorsPreprocessing.py} is run perform several
preprocessing steps in these data. The script concatenates the
attributes \texttt{dsS1Sensors{[}1{]}} and \texttt{dsS1Sensors{[}2{]}},
with an underscore. Whitespace is then stripped and all string values
are coerced to lowercase. This newly created attribute is then added to
the dataframe, as seen below (REF). Additionally, the attributes
\texttt{0}, \texttt{1} \& \texttt{2} are renamed \texttt{subActNum},
\texttt{room} \& \texttt{activity}, respectively. - Data types - IF a
sub-act requires electricity

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{6}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i S1sensorsPreprocessing.py
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{7}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dsS1Sensors}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, boxrule=.5pt, size=fbox, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{7}{\hspace{3.5pt}}
\begin{Verbatim}[commandchars=\\\{\}]
  subActNum      room       activity                concat
0       100  Bathroom  Toilet Flush   bathroom\_toiletflush
1       101  Bathroom   Light switch  bathroom\_lightswitch
2       104     Foyer   Light switch     foyer\_lightswitch
3       105   Kitchen   Light switch   kitchen\_lightswitch
4       106   Kitchen         Burner        kitchen\_burner
\end{Verbatim}
\end{tcolorbox}
        

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{8}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i getUniqueValues.py
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{9}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{uniqueS1SubActNum} \PY{o}{=} \PY{n}{getUniqueValues}\PY{p}{(}\PY{n}{dsS1Sensors}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{p}{:}\PY{p}{,}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
\PY{n+nb}{len}\PY{p}{(}\PY{n}{uniqueS1SubActNum}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, boxrule=.5pt, size=fbox, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{9}{\hspace{3.5pt}}
\begin{Verbatim}[commandchars=\\\{\}]
76
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{10}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{uniqueS1Sensors} \PY{o}{=} \PY{n}{getUniqueValues}\PY{p}{(}\PY{n}{dsS1Sensors}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{p}{:}\PY{p}{,}\PY{l+m+mi}{3}\PY{p}{]}\PY{p}{)}
\PY{n+nb}{len}\PY{p}{(}\PY{n}{uniqueS1Sensors}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, boxrule=.5pt, size=fbox, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{10}{\hspace{3.5pt}}
\begin{Verbatim}[commandchars=\\\{\}]
41
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{11}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i seen\PYZus{}dupes\PYZus{}dsS1Sensors.py
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
3   kitchen\_lightswitch
4   kitchen\_burner
2   livingroom\_lightswitch
7   kitchen\_drawer
3   kitchen\_refrigerator
15  kitchen\_cabinet
2   kitchen\_door
5   bedroom\_drawer
2   bathroom\_medicinecabinet
2   bathroom\_cabinet
\end{Verbatim}

    Upon compilation of the above summary list, and with reference to the
original work is was determined that these
values result from multiple sensors with extremely similar
functionality. For example, kitchen\_burner has a value of n=4 - this is
because on the burner in the apartment under investigation, there were 4
individual burners present. Similarly, kitchen\_cabinet has a value of
n=15, indicating that for the various cabinets in the apartment, each
were given sensors. On the one-hand, this level of granularity may
provide fertile grounds for advanced analysis, HOWEVER, for the purposes
of this research project, such values will serve to increase the
dimensionality of the overall dataset. High dimensionality can lead to
difficulties with plotting, \ldots. ML (REF) and thus IN A SUBSEQUENT
PREPROCESSING exercise these values will be collapsed down to have n=1.

\textbf{Creation of JSON Catalogues PRIOR to dup removal} - why? Because
even if a key-value pair cannot be matched it will simply be ignored
\textbf{Prior to dupe removal} As this work is largely concerned with
energy usage in the home, the sub-activities will be categorized based
on their energy requirement. That is, if a sub-activity requires an
input of energy beyond what the end user alone can provide, it will be
classified as \texttt{energyReq} = true. Whereas, if a sub-activity is
able to be performed through only interaction with the end user, it will
be classified as \texttt{energyReq} = false. By way of example, the
sub-activity \texttt{bathroom\_toiletflush} will have an
\texttt{energyReq} equal to false, while the sub-activity
\texttt{bathroom\_lightswitch} will have an \texttt{energyReq} equal to
true. Each row (n=76) needs to be inspected manually to determine if the
activity requires electricity.



    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{12}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i reqEnergy\PYZus{}containSpecialChar.py
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{13}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dsS1Sensors}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{dsS1Sensors}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{specialChar}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{==} \PY{k+kc}{True}\PY{p}{]}                           \PY{c+c1}{\PYZsh{} Filter for true}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, boxrule=.5pt, size=fbox, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{13}{\hspace{3.5pt}}
\begin{Verbatim}[commandchars=\\\{\}]
   subActNum          room      activity                    concat  reqEnergy  \textbackslash{}
58        82  Office/study        Drawer       office/study\_drawer      False
68        92  Office/study  Light switch  office/study\_lightswitch       True

    specialChar
58         True
68         True
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{14}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i reqEnergy\PYZus{}containSpecialCharClean.py
\end{Verbatim}
\end{tcolorbox}

    Comment: Later the \#\# values for subActNum will become subActNum\_\#\#

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{15}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dsS1Sensors}\PY{p}{[}\PY{l+m+mi}{58}\PY{p}{:}\PY{l+m+mi}{59}\PY{p}{]} \PY{c+c1}{\PYZsh{} STORE IN VARIABLE AND CALL IN APPENDIX}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, boxrule=.5pt, size=fbox, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{15}{\hspace{3.5pt}}
\begin{Verbatim}[commandchars=\\\{\}]
   subActNum   room activity        concat  reqEnergy subActNumConcat
58        82  Study   Drawer  study\_drawer      False    subActNum\_82
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{16}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} ALL JSON NOTES ADDED TO .py file}
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i sensorDataJSONwDUPES.py
\end{Verbatim}
\end{tcolorbox}

    \begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}\DataTypeTok{"bathroom_toiletflush"}\FunctionTok{:} \KeywordTok{false}\FunctionTok{,} 
 \DataTypeTok{"bathroom_lightswitch"}\FunctionTok{:} \KeywordTok{true}\FunctionTok{,} 
 \DataTypeTok{"foyer_lightswitch"}   \FunctionTok{:} \KeywordTok{true}\FunctionTok{,} \ErrorTok{...}
\end{Highlighting}
\end{Shaded}

    \begin{itemize}
\tightlist
\item
  Special CHAR dropped
\item
  Dupes not dropped (no point) (????) 
\end{itemize}


    The activities data set \texttt{S1activities.csv} will be imported,
evaluated and cleaned. The goal of the pre-processing will be to
restructure the dataset into a `tidy' format, that is, where the
attributes are columns, the rows are instances, and each cell contains
only one value. Given that the data is time-series, timestamps will be
used as indexes. The data will also be cast into continuous 24 hour
segments, with timestamps in the form \texttt{YYYY-MM-DD\ hh:mm:ss}
(using datetime data type)

MENTION THIS FROM Huang et al.~

We aim to perform the preprocessing in such a way that is * minimally
computationally intensive * reproducible / traceable code * reasonable
checks (validation)

Example of ds when opened in Microsoft excel.

The activities data was imported into an indexed dataframe, containing
only one column, with 1475 rows, with all values comma-separated (per
row). This style of import had to be used, due to the varying number of
comma-separated elements in each row (as seen in figure X, above).

\begin{itemize}
\tightlist
\item
  A array of strings, instead of an array of arrays Analysis of the
  original dataset, and exploration during pre-processing to this point,
  shows us that the original dataset follows a structure such that each
  5 rows of data contains is one discrete set of data. In this
  structure,
\item
  Row 1 = Activity, Date, Start Time, End Time
\item
  Row 2 = Sub-activity (an action that can be executed as part of
  performing the activity) code-values
\item
  Row 3 = Sub-activity descriptive values
\item
  Row 4 = Sub-activity start time
\item
  Row 5 = Sub-activity end time In order to access the values
  programmatically, we will now turn the 1D array list back into a 2D
  array list, where each element array{[}i{]} contains the 5 rows of
  information, as described above.
\end{itemize}

The activities data set \texttt{S1activities.csv} will be imported,
evaluated and cleaned. The goal of the pre-processing will be to
restructure the dataset into a `tidy' format, that is, where the
attributes are columns, the rows are instances, and each cell contains
only one value. Given that the data is time-series, timestamps will be
used as indexes. The data will also be cast into continuous 24 hour
segments, with timestamps in the form \texttt{YYYY-MM-DD\ hh:mm:ss}
(using datetime data type)

We aim to perform the preprocessing in such a way that is * minimally
computationally intensive * reproducible / traceable code * reasonable
checks (validation) The activities data was imported into an indexed
dataframe, containing only one column, with 1475 rows, with all values
comma-separated (per row). This style of import had to be used, due to
the varying number of comma-separated elements in each row (as seen in
figure X, above). * A array of strings, instead of an array of arrays
Analysis of the original dataset, and exploration during pre-processing
to this point, shows us that the original dataset follows a structure
such that each 5 rows of data contains is one discrete set of data. In
this structure, * Row 1 = Activity, Date, Start Time, End Time * Row 2 =
Sub-activity (an action that can be executed as part of performing the
activity) code-values * Row 3 = Sub-activity descriptive values * Row 4
= Sub-activity start time * Row 5 = Sub-activity end time In order to
access the values programmatically, we will now turn the 1D array list
back into a 2D array list, where each element array{[}i{]} contains the
5 rows of information, as described above.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{18}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i dsS1Activities\PYZus{}processingExample.py
\PY{n}{df}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, boxrule=.5pt, size=fbox, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{18}{\hspace{3.5pt}}
\begin{Verbatim}[commandchars=\\\{\}]
                            Type  \textbackslash{}
0  An array of comma-sep strings
1  An array of comma-sep strings
2  An array of comma-sep strings
3  An array of comma-sep strings
4  An array of comma-sep strings

                                       Description   \textbackslash{}
0  Activity information, date, start time, end time
1                      Sub-activity reference value
2                    Sub-activity descriptive value
3                           Sub-activity start time
4                             Sub-activity end time

                                        Desired Type
0                                                {\ldots}
1                                             Levels
2                                             Levels
3  Datetime including the date extracted from the{\ldots}
4  Datetime including the date extracted from the{\ldots}
\end{Verbatim}
\end{tcolorbox}
        
    As mentioned above, in order to work with these data, they need to be in
a `tidy' format {[}ref{]}, that is, the attributes are columns, the rows
are instances, and each cell contains only one value. * Note: An array
of arrays * An array where each element is an array (list?) * Between
each increment of 5 (0 - 4), the sub-arrays have different lengths Table
{[}ref{]}, below, contains a summary of the data structure after the
operation \texttt{np.array(dsS1)} is performed. In order to continue
pre-processing, the array had to be flattened from a 2D structure to a
1D structure, using \texttt{flatten()}.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{19}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dsS1} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{PATH} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{/datasets/S1activities\PYZus{}data.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sep} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{delimiter}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{header} \PY{o}{=} \PY{k+kc}{None}\PY{p}{,} \PY{n}{engine} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{python}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{20}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dsS1}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, boxrule=.5pt, size=fbox, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{20}{\hspace{3.5pt}}
\begin{Verbatim}[commandchars=\\\{\}]
                                                   0
0                 Bathing,4/1/2003,20:41:35,21:32:50
1  100,68,81,101,93,137,93,58,57,67,93,58,68,88,5{\ldots}
2  Toilet Flush,Sink faucet - hot,Closet,Light sw{\ldots}
3  20:51:52,20:51:58,20:53:36,20:53:49,20:53:52,2{\ldots}
4  21:5:20,20:52:5,20:53:43,21:21:43,20:58:42,20:{\ldots}
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{21}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} Confirming the length of the dataframe}
\PY{n+nb}{len}\PY{p}{(}\PY{n}{dsS1}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, boxrule=.5pt, size=fbox, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{21}{\hspace{3.5pt}}
\begin{Verbatim}[commandchars=\\\{\}]
1475
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{22}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i dsS1Activities\PYZus{}processing.py
\end{Verbatim}
\end{tcolorbox}

    The function \texttt{dsS1Activities\_processing.py} was run in-line to
perform the required preprocessing. The dataframe was then converted to
a 2D array, using \texttt{np.array()}, here, each row from the dataframe
became an array within the 2D array {[}Step 1{]}. The 2D array was
flattened to a 1D array using \texttt{.flatten()} {[}Step 2{]}. each
group of observations was then chunked into a list of 5 {[}Step 3{]}

Mention sanity checking here

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{i }\OperatorTok{=} \DecValTok{0}
\ControlFlowTok{while}\NormalTok{ i }\OperatorTok{<} \DecValTok{5}\NormalTok{:}
    \BuiltInTok{print}\NormalTok{(stepX[i])}
\NormalTok{    i }\OperatorTok{+=} \DecValTok{1}
\end{Highlighting}
\end{Shaded}



We used the Step 3 data structure to then extract the values for
\texttt{activity}, \texttt{date}, \texttt{startTime} and
\texttt{endTime}. These values were populated into a series of temporary
arrays, which were then compiled into a dataset with the four attributes
previously listed. We then used \texttt{Step3{[}i{]}{[}j{]}} to access
all the required elements and parse them into the arrays.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{23}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dsIntermediate}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, boxrule=.5pt, size=fbox, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{23}{\hspace{3.5pt}}
\begin{Verbatim}[commandchars=\\\{\}]
            activity      date startTime   endTime
0            Bathing  4/1/2003  20:41:35  21:32:50
1          Toileting  4/1/2003  17:30:36  17:46:41
2          Toileting  4/1/2003   18:4:43   18:18:2
3          Toileting  4/1/2003   11:52:1  11:58:50
4  Going out to work  4/1/2003  12:11:26  12:15:12
\end{Verbatim}
\end{tcolorbox}
        
    \textbf{Extracting the Activity, Time and Data} If we run
\texttt{a{[}0{]}{[}0{]}}, we get


\textbf{Constructing the while loop} * Create empty lists * Extracts the
relevant elements * Adds (appends) the elements to the lists

\textbf{Sanity Checks} * We won't check the entire DF, rather, will rely
on errors thrown back to confirm validity (`validation of the method') *
Divisible by 5

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{24}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ds}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, boxrule=.5pt, size=fbox, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{24}{\hspace{3.5pt}}
\begin{Verbatim}[commandchars=\\\{\}]
            activity               start                 end
0            Bathing 2003-04-01 20:41:35 2003-04-01 21:32:50
1          Toileting 2003-04-01 17:30:36 2003-04-01 17:46:41
2          Toileting 2003-04-01 18:04:43 2003-04-01 18:18:02
3          Toileting 2003-04-01 11:52:01 2003-04-01 11:58:50
4  Going out to work 2003-04-01 12:11:26 2003-04-01 12:15:12
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{25}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ds}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{n}{PATH} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{/intermediate\PYZus{}datasets/S1Activities\PYZus{}preprocessed.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{index} \PY{o}{=} \PY{k+kc}{False}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{importing-visualizing-and-preprocessing-the-subactivities-data}{%
\subsection{Importing, Visualizing and Preprocessing the SubActivities
Data}\label{importing-visualizing-and-preprocessing-the-subactivities-data}}

    Importing \texttt{S1Activities\_data.csv}, convert df to an array
(list?), flatten to a 1D array (list?), chunk the array {[}5{]}, extract
subActNum, subActivity, time \& date. Merge time and date into datetime
elements, determine start and end time. The variable \texttt{dsS1} was
used (still on stack from previous section). As previously observed
(FIGURE X, TABLE Y), data was all in one column. A processing method
with additional steps BLAH BLAH.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{26}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i dsS1SubActivities\PYZus{}processing.py
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{27}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dsIntermediate}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, boxrule=.5pt, size=fbox, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{27}{\hspace{3.5pt}}
\begin{Verbatim}[commandchars=\\\{\}]
  subActNum             subAct      date startTime   endTime
0       100       Toilet Flush  4/1/2003  20:51:52   21:5:20
1        68  Sink faucet - hot  4/1/2003  20:51:58   20:52:5
2        81             Closet  4/1/2003  20:53:36  20:53:43
3       101       Light switch  4/1/2003  20:53:49  21:21:43
4        93      Shower faucet  4/1/2003  20:53:52  20:58:42
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{28}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ds}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, boxrule=.5pt, size=fbox, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{28}{\hspace{3.5pt}}
\begin{Verbatim}[commandchars=\\\{\}]
   subActNum            subAct               start                 end
0         67           Cabinet 2003-03-27 06:43:40 2003-03-27 06:43:43
1        100      Toilet Flush 2003-03-27 06:44:06 2003-03-27 07:12:41
2        101      Light switch 2003-03-27 06:44:20 2003-03-27 07:46:34
3         57  Medicine cabinet 2003-03-27 06:44:35 2003-03-27 06:44:48
4         58  Medicine cabinet 2003-03-27 06:44:36 2003-03-27 06:44:48
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{29}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{}ds.info()}
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i seen\PYZus{}dupes\PYZus{}dsS1Sensors.py
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
3   kitchen\_lightswitch
4   kitchen\_burner
2   livingroom\_lightswitch
7   kitchen\_drawer
3   kitchen\_refrigerator
15  kitchen\_cabinet
2   kitchen\_door
5   bedroom\_drawer
2   bathroom\_medicinecabinet
2   bathroom\_cabinet
\end{Verbatim}

    \hypertarget{sub-activity-preprocessing---duplicate-sub-activities}{%
\subsubsection{Sub Activity Preprocessing - Duplicate sub
activities}\label{sub-activity-preprocessing---duplicate-sub-activities}}

    The following duplicate sensors were identified in section XX

\begin{itemize}
\tightlist
\item
  From \texttt{S1Sensors\_preprocessed.csv} I need to find the numbers
  associated with these - SUBACTNUM
\item
  `Arbitrarily' choose one number to represent all of them
\item
  Fill them all with that one number
\end{itemize}

\textbf{For dicussion later} - The kitchen cabinets have 15 sensors, say
one of these cabinets just contains a blender, so there will always be a
one-to-one between the cabinet opening and the blendor being used. This
isn't particularly helpful to us. Also, more sensors could always be
added\ldots{} Better to do analysis with less (explain?) Note for
discussion, S1Sensors\_preprocessed itself should no longer be modified,
EXAMPLE, going back upstream to remove the `dupes', would perhaps cause
an lack of traceability downstream later, Importing
S1Sensors\_preprecessed now has been done to inform, how to remove
`dupes' from the current ds

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{30}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i cleanDupesSubAct.py
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i add\PYZus{}DAY\PYZus{}WDWE\PYZus{}phaseII.py
\end{Verbatim}
\end{tcolorbox}

    Replace the \texttt{ds.subAct} values with \texttt{dsS1Sensors.concat}
values using the \texttt{subActNum} key * Join OR * Dict? USE THIS -
cleaner

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{31}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i refrigeratorDupes.py
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
[91, 126, 144]
\end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{32}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i removeDupesJSON.py
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{33}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i refrigeratorDupes.py
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
[126]
\end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{34}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{subActNumKeyWithStringDictNoDupes}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, boxrule=.5pt, size=fbox, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{34}{\hspace{3.5pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\{100: 'bathroom\_toiletflush',
 101: 'bathroom\_lightswitch',
 104: 'foyer\_lightswitch',
 105: 'kitchen\_lightswitch',
 106: 'kitchen\_burner',
 107: 'livingroom\_lightswitch',
 108: 'bedroom\_lightswitch',
 109: 'porch\_lightswitch',
 119: 'kitchen\_coffeemachine',
 125: 'kitchen\_drawer',
 126: 'kitchen\_refrigerator',
 129: 'kitchen\_oven',
 130: 'bathroom\_door',
 131: 'kitchen\_toaster',
 132: 'kitchen\_cabinet',
 136: 'kitchen\_window',
 137: 'kitchen\_freezer',
 139: 'bedroom\_jewelrybox',
 140: 'foyer\_door',
 141: 'kitchen\_door',
 142: 'kitchen\_washingmachine',
 143: 'kitchen\_microwave',
 145: 'kitchen\_cereal',
 146: 'bedroom\_drawer',
 56: 'livingroom\_dvd',
 57: 'bathroom\_medicinecabinet',
 60: 'kitchen\_containers',
 64: 'bedroom\_lamp',
 67: 'bathroom\_cabinet',
 68: 'bathroom\_sinkfaucet-hot',
 70: 'kitchen\_dishwasher',
 76: 'livingroom\_lamp',
 81: 'foyer\_closet',
 82: 'study\_drawer',
 85: 'bedroom\_window',
 88: 'bathroom\_sinkfaucet-cold',
 90: 'kitchen\_laundrydryer',
 92: 'study\_lightwitch',
 93: 'bathroom\_showerfaucet',
 96: 'bathroom\_exhaustfan',
 98: 'kitchen\_garbagedisposal'\}
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{35}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ds}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{S1SubActivities\PYZus{}preprocessed.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{index} \PY{o}{=} \PY{k+kc}{False}\PY{p}{)}
\PY{o}{\PYZpc{}}\PY{k}{run} add\PYZus{}DAY\PYZus{}WDWE\PYZus{}phaseI.py
\PY{n}{ds} \PY{o}{=} \PY{n}{add\PYZus{}DAY\PYZus{}WDWE\PYZus{}phaseI}\PY{p}{(}\PY{n}{ds}\PY{p}{)}
\PY{n}{ds}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{S1SubActivities\PYZus{}preprocessedR.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{index} \PY{o}{=} \PY{k+kc}{False}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{subactivity-preprocessing-comparison-and-outliers}{%
\subsubsection{SubActivity Preprocessing Comparison and
Outliers}\label{subactivity-preprocessing-comparison-and-outliers}}

    INSERT R CODE - Magic or Text?

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{myVar <-}\StringTok{ }\DecValTok{6}
\end{Highlighting}
\end{Shaded}

    \hypertarget{loading-the-data}{%
\paragraph{Loading the Data}\label{loading-the-data}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{36}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}\PYZpc{}}\PY{k}{R}
ds \PYZlt{}\PYZhy{} read\PYZus{}csv(\PYZsq{}S1SubActivities\PYZus{}preprocessedR.csv\PYZsq{}, col\PYZus{}types = cols(subActNum = col\PYZus{}character(),
                                                                     dayNumeric = col\PYZus{}character(),
                                                                     HOUR = col\PYZus{}character()))
ds\PYZdl{}start \PYZlt{}\PYZhy{} ymd\PYZus{}hms(ds\PYZdl{}start)
ds\PYZdl{}start \PYZlt{}\PYZhy{} force\PYZus{}tz(ds\PYZdl{}start, \PYZdq{}America/New\PYZus{}York\PYZdq{})
ds\PYZdl{}end \PYZlt{}\PYZhy{} ymd\PYZus{}hms(ds\PYZdl{}end)
ds\PYZdl{}end \PYZlt{}\PYZhy{} force\PYZus{}tz(ds\PYZdl{}end, \PYZdq{}America/New\PYZus{}York\PYZdq{})
ds\PYZdl{}subAct \PYZlt{}\PYZhy{} as.factor(ds\PYZdl{}subAct)

total\PYZus{}counts \PYZlt{}\PYZhy{} ds \PYZpc{}\PYZgt{}\PYZpc{} group\PYZus{}by(DAY, subAct) \PYZpc{}\PYZgt{}\PYZpc{} summarise(count=n())
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{aggregated-line-chart}{%
\paragraph{Aggregated Line Chart}\label{aggregated-line-chart}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{37}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}\PYZpc{}}\PY{k}{R}
p \PYZlt{}\PYZhy{} ggplot(total\PYZus{}counts, aes(x = subAct, y = count, group = DAY, color = DAY))
p \PYZlt{}\PYZhy{} p + geom\PYZus{}line()
p \PYZlt{}\PYZhy{} p + geom\PYZus{}point()
p \PYZlt{}\PYZhy{} p + coord\PYZus{}flip() + labs(title = \PYZdq{}Plot of SubActivity Count versus SubActivity\PYZdq{},
                             subtitle = \PYZdq{}ADD SUBTITLE \PYZhy{} Preprocessing Stage?\PYZdq{},
                             caption = \PYZdq{}Source: TBU\PYZdq{},
                             x = \PYZdq{}SubActivity\PYZdq{},
                             y = \PYZdq{}Aggregated Count\PYZdq{})
ggsave(\PYZdq{}images/lineChart.png\PYZdq{}, plot = last\PYZus{}plot(), device = png(), 
       scale = 1.5, width = 18, height = 16, units = c(\PYZdq{}cm\PYZdq{}), dpi = 300)
\end{Verbatim}
\end{tcolorbox}

    MENTION THIS FROM Huang et al.~ 

    \hypertarget{aggregated-box-plot}{%
\paragraph{Aggregated Box Plot}\label{aggregated-box-plot}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{38}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}\PYZpc{}}\PY{k}{R}
p \PYZlt{}\PYZhy{} ggplot(ds, aes(subAct, durationSec))
p \PYZlt{}\PYZhy{} p + geom\PYZus{}boxplot(fill= \PYZdq{}plum\PYZdq{}, outlier.alpha = 0.8) \PYZsh{} aes(colour = WDWE) \PYZsh{}, outlier.size = 1
p \PYZlt{}\PYZhy{} p + theme(legend.position = \PYZdq{}right\PYZdq{}) + coord\PYZus{}flip() +
  labs(title = \PYZdq{}Box Plots\PYZdq{},
       subtitle = \PYZdq{}Subactivity Duraiton\PYZdq{},
       caption = \PYZdq{}Source: TBU\PYZdq{},
       x = \PYZdq{}SubActivity\PYZdq{},
       y = \PYZdq{}Duration (sec)\PYZdq{})
ggsave(\PYZdq{}images/boxPlots.png\PYZdq{}, plot = last\PYZus{}plot(), device = png(), 
       scale = 1.5, width = 18, height = 16, units = c(\PYZdq{}cm\PYZdq{}), dpi = 300)
\end{Verbatim}
\end{tcolorbox}

    MENTION THIS FROM Huang et al.~ 

    \hypertarget{strip-plots}{%
\paragraph{Strip Plots}\label{strip-plots}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{39}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i altairDurationCharts.py
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{40}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} Example charts}
\PY{n}{charts}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, boxrule=.5pt, size=fbox, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{40}{\hspace{3.5pt}}
\begin{Verbatim}[commandchars=\\\{\}]
<VegaLite 3 object>

If you see this message, it means the renderer has not been properly enabled
for the frontend that you are using. For more information, see
https://altair-viz.github.io/user\_guide/troubleshooting.html

\end{Verbatim}
\end{tcolorbox}
        
    

    \begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Set specified column as index
\item
  Extract dayofweek from index (ds.index.dayofweek.astype(str)), as this
  as an attribute
\item
  Replace `0' with `mon' and so on
\item
  Duplicate\ldots{}
\end{enumerate}

\begin{itemize}
\tightlist
\item
  Intermittant and persistant??? Definitions\ldots{}
\end{itemize}

    \hypertarget{subactivity-cleansing---outlier-removal}{%
\subsubsection{SubActivity Cleansing - Outlier
Removal}\label{subactivity-cleansing---outlier-removal}}

    TEXT

    \hypertarget{bathroom---toilet-flush-sub-activity-100}{%
\paragraph{Bathroom - Toilet Flush, Sub-activity \#
100}\label{bathroom---toilet-flush-sub-activity-100}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} Toilet Duration Chart}
\end{Verbatim}
\end{tcolorbox}

    Text

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{48}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i cleanToilet.py
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{dropping-values}{%
\paragraph{Dropping Values}\label{dropping-values}}

    

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{42}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i countUnique.py
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
38
\end{Verbatim}

    Based on the investigation of the strip plots + XYZ

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# valueDrop.py}
\NormalTok{ds }\OperatorTok{=}\NormalTok{ ds[ds.subAct }\OperatorTok{!=} \StringTok{'bedroom_jewelrybox'}\NormalTok{]}
\NormalTok{ds }\OperatorTok{=}\NormalTok{ ds[ds.subAct }\OperatorTok{!=} \StringTok{'foyer_closet'}\NormalTok{]}
\NormalTok{ds }\OperatorTok{=}\NormalTok{ ds[ds.subAct }\OperatorTok{!=} \StringTok{'kitchen_cereal'}\NormalTok{]}
\NormalTok{ds }\OperatorTok{=}\NormalTok{ ds[ds.subAct }\OperatorTok{!=} \StringTok{'kitchen_containers'}\NormalTok{]}
\NormalTok{ds }\OperatorTok{=}\NormalTok{ ds[ds.subAct }\OperatorTok{!=} \StringTok{'bedroom_lamp'}\NormalTok{]}
\NormalTok{ds }\OperatorTok{=}\NormalTok{ ds[ds.subAct }\OperatorTok{!=} \StringTok{'livingroom_dvd'}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{56}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} Jewelry + foyer closet + cereal + containers + lamp}
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i valueDrop.py
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{57}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i countUnique.py
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
32
\end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{58}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} NAME CHANGE?}
\PY{n}{ds}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{S1SubActivities\PYZus{}temporalFeaturesNoDUPES.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{index} \PY{o}{=} \PY{k+kc}{False}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{filling-outliers-with-median}{%
\paragraph{Filling outliers with
Median}\label{filling-outliers-with-median}}

    Based on strip plot and so on

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{59}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{subActNames} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bathroom\PYZus{}cabinet}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bathroom\PYZus{}medicinecabinet}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{study\PYZus{}drawer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
               \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bedroom\PYZus{}drawer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{kitchen\PYZus{}cabinet}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{kitchen\PYZus{}microwave}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
               \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{kitchen\PYZus{}door}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bathroom\PYZus{}showerfaucet}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{kitchen\PYZus{}drawer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
               \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bathroom\PYZus{}sinkfaucet\PYZhy{}hot}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{kitchen\PYZus{}freezer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bathroom\PYZus{}door}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
               \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{kitchen\PYZus{}toaster}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{kitchen\PYZus{}lightswitch}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{study\PYZus{}lightwitch}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
               \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{kitchen\PYZus{}dishwasher}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{livingroom\PYZus{}lightswitch}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{50}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i determineMeanMedian.py
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{60}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{allMedianValues}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, boxrule=.5pt, size=fbox, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{60}{\hspace{3.5pt}}
\begin{Verbatim}[commandchars=\\\{\}]
                      SubAct  Count  Median          Mean           Std
0           bathroom\_cabinet    104     3.0    459.221154   3176.163323
1   bathroom\_medicinecabinet    194    87.0   3187.974227   7354.142408
2               study\_drawer     45     5.0   1633.488889   5432.406346
3             bedroom\_drawer     99     9.0    272.474747   1918.726179
4            kitchen\_cabinet    406     6.0    111.820197   1864.012246
5          kitchen\_microwave     61     5.0    376.409836   2868.667916
6               kitchen\_door    134     3.0     45.111940    174.185652
7      bathroom\_showerfaucet     88    14.0   1753.352273   6540.729518
8             kitchen\_drawer    208     3.0    144.062500   1727.576706
9    bathroom\_sinkfaucet-hot    169    10.0     56.905325    501.272871
10           kitchen\_freezer    130    38.0   1737.107692   4512.573808
11             bathroom\_door     73    16.0    460.616438   2310.811556
12           kitchen\_toaster     71     4.0    789.366197   3793.674375
13       kitchen\_lightswitch     32  4453.0   9317.718750  13081.340412
14          study\_lightwitch     26  1727.5   6429.730769  11002.302517
15        kitchen\_dishwasher     86    62.5   1517.406977   4146.637482
16    livingroom\_lightswitch      8  6351.5  12544.125000  15556.662849
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{52}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i cleanseOutliers.py
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{53}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ds}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, boxrule=.5pt, size=fbox, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{53}{\hspace{3.5pt}}
\begin{Verbatim}[commandchars=\\\{\}]
   subActNum                    subAct               start  \textbackslash{}
0         67          bathroom\_cabinet 2003-03-27 06:43:40
1        100      bathroom\_toiletflush 2003-03-27 06:44:06
2        101      bathroom\_lightswitch 2003-03-27 06:44:20
3         57  bathroom\_medicinecabinet 2003-03-27 06:44:35
4         57  bathroom\_medicinecabinet 2003-03-27 06:44:36

                  end dayNumeric  DAY WDWE  HOUR  durationSec
0 2003-03-27 06:43:43          3  Thu   WD     6            4
1 2003-03-27 06:44:07          3  Thu   WD     6            2
2 2003-03-27 07:46:34          3  Thu   WD     6         3735
3 2003-03-27 06:44:48          3  Thu   WD     6           14
4 2003-03-27 06:44:48          3  Thu   WD     6           13
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{54}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ds}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{S1SubActivities\PYZus{}temporalFeaturesCLEANSED.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{index} \PY{o}{=} \PY{k+kc}{False}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{subactivity-visualisation}{%
\subsubsection{Subactivity
Visualisation}\label{subactivity-visualisation}}

    

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]

\end{Verbatim}
\end{tcolorbox}

    \hypertarget{livingroom-dvd}{%
\subparagraph{Livingroom DVD}\label{livingroom-dvd}}

    DROPPED - One value only * 2

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{bathroom-medicine-cabinet}{%
\subparagraph{Bathroom Medicine
Cabinet}\label{bathroom-medicine-cabinet}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{kitchen-containers}{%
\subparagraph{Kitchen Containers}\label{kitchen-containers}}

    DROPPED

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{bedroom-lamp}{%
\subparagraph{Bedroom Lamp}\label{bedroom-lamp}}

    DROPPED

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{bathroom-cabinet}{%
\subparagraph{Bathroom Cabinet}\label{bathroom-cabinet}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{bathroom-sickfaucet---hot}{%
\subparagraph{Bathroom Sickfaucet -
Hot}\label{bathroom-sickfaucet---hot}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{kitchen-dishwasher}{%
\subparagraph{Kitchen Dishwasher}\label{kitchen-dishwasher}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{livingroom-lamp}{%
\subparagraph{Livingroom Lamp}\label{livingroom-lamp}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{foyer-closet}{%
\subparagraph{Foyer Closet}\label{foyer-closet}}

    DROPPED

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{study-drawer}{%
\subparagraph{Study Drawer}\label{study-drawer}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{bathroom-sickfaucet---cold}{%
\subparagraph{Bathroom Sickfaucet -
Cold}\label{bathroom-sickfaucet---cold}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{kitchen-laundry-dryer}{%
\subparagraph{Kitchen Laundry Dryer}\label{kitchen-laundry-dryer}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{study-lightswitch}{%
\subparagraph{Study Lightswitch}\label{study-lightswitch}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{bathroom-shower-faucet}{%
\subparagraph{Bathroom Shower Faucet}\label{bathroom-shower-faucet}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{bathroom-exhaust-fan}{%
\subparagraph{Bathroom Exhaust Fan}\label{bathroom-exhaust-fan}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{kitchen-garbage-disposal}{%
\subparagraph{Kitchen Garbage Disposal}\label{kitchen-garbage-disposal}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{bathroom-toiletflush}{%
\subparagraph{Bathroom Toiletflush}\label{bathroom-toiletflush}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{bathroom-lightswitch}{%
\subparagraph{Bathroom Lightswitch}\label{bathroom-lightswitch}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{foyer-lightswitch}{%
\subparagraph{Foyer Lightswitch}\label{foyer-lightswitch}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{kitchen-lightswitch}{%
\subparagraph{Kitchen Lightswitch}\label{kitchen-lightswitch}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{kitchen-burner}{%
\subparagraph{Kitchen Burner}\label{kitchen-burner}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{livingroom-lightswitch}{%
\subparagraph{Livingroom Lightswitch}\label{livingroom-lightswitch}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{bedroom-lightswitch}{%
\subparagraph{Bedroom Lightswitch}\label{bedroom-lightswitch}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{kitchen-coffee-machine}{%
\subparagraph{Kitchen Coffee Machine}\label{kitchen-coffee-machine}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{kitchen-drawer}{%
\subparagraph{Kitchen Drawer}\label{kitchen-drawer}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{kitchen-refrigerator}{%
\subparagraph{Kitchen Refrigerator}\label{kitchen-refrigerator}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{kitchen-oven}{%
\subparagraph{Kitchen Oven}\label{kitchen-oven}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{bathroom-door}{%
\subparagraph{Bathroom Door}\label{bathroom-door}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{kitchen-toaster}{%
\subparagraph{Kitchen Toaster}\label{kitchen-toaster}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{kitchen-cabinet}{%
\subparagraph{Kitchen Cabinet}\label{kitchen-cabinet}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{kitchen-freezer}{%
\subparagraph{Kitchen Freezer}\label{kitchen-freezer}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{bedroom-jewelrybox}{%
\subparagraph{Bedroom Jewelrybox}\label{bedroom-jewelrybox}}

    DROPPED

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{foyer-door}{%
\subparagraph{Foyer Door}\label{foyer-door}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{kitchen-door---correct-typo}{%
\subparagraph{Kitchen Door - CORRECT
TYPO}\label{kitchen-door---correct-typo}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{kitchen-washingmachine}{%
\subparagraph{Kitchen Washingmachine}\label{kitchen-washingmachine}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{kitchen-microwave}{%
\subparagraph{Kitchen Microwave}\label{kitchen-microwave}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{kitchen-cereal}{%
\subparagraph{Kitchen Cereal}\label{kitchen-cereal}}

    DROPPED

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{bedroom-drawer}{%
\subparagraph{Bedroom Drawer}\label{bedroom-drawer}}

    Text

    MENTION THIS FROM Huang et al.~

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{data-analysis}{%
\section{Data Analysis}\label{data-analysis}}

    \hypertarget{determination-of-the-most-effective-data-structure---not-here}{%
\subsection{Determination of the most `effective' data structure - NOT
HERE}\label{determination-of-the-most-effective-data-structure---not-here}}

    \textbf{Key finding = data structure most amenable\ldots{}}

\begin{itemize}
\tightlist
\item
  Driven by two main concepts (main?)
\item
  Driven by two competing concepts (competing?)
\end{itemize}

MENTION THIS FROM Huang et al.~ 

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{1}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i Packages.py
\PY{o}{\PYZpc{}}\PY{k}{matplotlib} inline
\PY{o}{\PYZpc{}}\PY{k}{load\PYZus{}ext} rpy2.ipython
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{3}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i PlotlyPackages.py
\PY{n}{ds} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{S1SubActivities\PYZus{}temporalFeaturesCLEANSED.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{index\PYZus{}col} \PY{o}{=} \PY{k+kc}{None}\PY{p}{)}
\PY{n}{ds}\PY{o}{.}\PY{n}{start} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}datetime}\PY{p}{(}\PY{n}{ds}\PY{o}{.}\PY{n}{start}\PY{p}{,} \PY{n+nb}{format}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{Y\PYZhy{}}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{m\PYZhy{}}\PY{l+s+si}{\PYZpc{}d}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{H:}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{M:}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{S}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{ds}\PY{o}{.}\PY{n}{end} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}datetime}\PY{p}{(}\PY{n}{ds}\PY{o}{.}\PY{n}{end}\PY{p}{,} \PY{n+nb}{format}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{Y\PYZhy{}}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{m\PYZhy{}}\PY{l+s+si}{\PYZpc{}d}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{H:}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{M:}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{S}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{ds} \PY{o}{=} \PY{n}{ds}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{start}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{ds}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{n}{drop} \PY{o}{=} \PY{k+kc}{True}\PY{p}{,} \PY{n}{inplace} \PY{o}{=} \PY{k+kc}{True}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{4}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ds}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)} \PY{c+c1}{\PYZsh{} REALLY RE\PYZhy{}IMPORT???}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, boxrule=.5pt, size=fbox, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{4}{\hspace{3.5pt}}
\begin{Verbatim}[commandchars=\\\{\}]
   subActNum                    subAct               start  \textbackslash{}
0         67          bathroom\_cabinet 2003-03-27 06:43:40
1        100      bathroom\_toiletflush 2003-03-27 06:44:06
2        101      bathroom\_lightswitch 2003-03-27 06:44:20
3         57  bathroom\_medicinecabinet 2003-03-27 06:44:35
4         57  bathroom\_medicinecabinet 2003-03-27 06:44:36

                  end  dayNumeric  DAY WDWE  HOUR  durationSec
0 2003-03-27 06:43:43           3  Thu   WD     6            4
1 2003-03-27 06:44:07           3  Thu   WD     6            2
2 2003-03-27 07:46:34           3  Thu   WD     6         3735
3 2003-03-27 06:44:48           3  Thu   WD     6           14
4 2003-03-27 06:44:48           3  Thu   WD     6           13
\end{Verbatim}
\end{tcolorbox}
        
    MENTION SEGMETNATION HERE OF 3 PARTS OF DAY - Morning - Afternoon -
Evening

    \hypertarget{add-day-segmentatation-section}{%
\subsection{ADD DAY SEGMENTATATION
SECTION}\label{add-day-segmentatation-section}}

    Problem Statement \textbf{If start EVENTA between X and Y on a WD/WE the
PR that I will start EVENTB within Z minutes is Q.}

\begin{quote}
\emph{If I switch on the bathroom light switch between 6am and 7am on a
weekday, the probability that I will use my razor is X.}
\end{quote}

\begin{itemize}
\item
  Relationships
\item
  Intersection
\item
  Separate
\item
  Enclosed
\item
  Equal
\end{itemize}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Equal Start
\item
  Delta positive (the highest)
\item
  Delta Zero (the first)
\item
  Delta Negative (closest to zero)
\end{enumerate}

And nearest 5

The dataset @SANKEY The sankey diagrams show the sequences such that
certain activities (NOT requiring electricity) mostly {[}always?{]} come
before those that require electricity. In other words, `energy poor'
activities often act of preparative in the lead up to `energy intensive'
activities. The Sankey can show this by looking at the `terminal
events'.

    \hypertarget{sequential-analysis}{%
\subsection{Sequential Analysis}\label{sequential-analysis}}

    Reasoning

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{5}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{import} \PY{n+nn}{datetime} \PY{k}{as} \PY{n+nn}{dt}

\PY{k}{def} \PY{n+nf}{id\PYZus{}delta}\PY{p}{(}\PY{n}{events}\PY{p}{,} \PY{n}{n}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{delta\PYZus{}threshold}\PY{o}{=}\PY{n}{dt}\PY{o}{.}\PY{n}{timedelta}\PY{p}{(}\PY{o}{\PYZhy{}}\PY{l+m+mi}{99}\PY{p}{)}\PY{p}{)}\PY{p}{:}
    \PY{n}{nns} \PY{o}{=} \PY{p}{[}\PY{p}{]}
    \PY{k}{for} \PY{n}{row} \PY{o+ow}{in} \PY{n}{events}\PY{o}{.}\PY{n}{itertuples}\PY{p}{(}\PY{p}{)}\PY{p}{:}
        \PY{c+c1}{\PYZsh{}print(row)}
        \PY{n}{start\PYZus{}time} \PY{o}{=} \PY{n+nb}{getattr}\PY{p}{(}\PY{n}{row}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{start}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{end\PYZus{}time} \PY{o}{=} \PY{n+nb}{getattr}\PY{p}{(}\PY{n}{row}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{end}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{subActNum} \PY{o}{=} \PY{n+nb}{getattr}\PY{p}{(}\PY{n}{row}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{subActNum}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{row\PYZus{}index} \PY{o}{=} \PY{n+nb}{getattr}\PY{p}{(}\PY{n}{row}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        
        \PY{n}{nn} \PY{o}{=} \PY{n}{events}\PY{p}{[}\PY{p}{(}\PY{n}{events}\PY{o}{.}\PY{n}{start} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{start\PYZus{}time}\PY{p}{)} \PY{o}{\PYZam{}} 
                    \PY{p}{(}\PY{n}{events}\PY{o}{.}\PY{n}{index} \PY{o}{!=} \PY{n}{row\PYZus{}index}\PY{p}{)} \PY{o}{\PYZam{}} 
                    \PY{p}{(}\PY{p}{(}\PY{n}{start\PYZus{}time} \PY{o}{\PYZhy{}} \PY{n}{events}\PY{o}{.}\PY{n}{start}\PY{p}{)} \PY{o}{\PYZgt{}} \PY{n}{delta\PYZus{}threshold}\PY{p}{)}\PY{p}{]}\PY{p}{[}\PY{p}{:}\PY{n}{n}\PY{p}{]}
        \PY{c+c1}{\PYZsh{}print(len(nn))}
        \PY{n}{ordered} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{p}{)}
        \PY{n}{ordered}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Dummy}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{nn}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{subActNum}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
        \PY{n}{ordered}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{EventA}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{subActNum}
        \PY{n}{ordered}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{EventB}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{nn}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{subActNum}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
        \PY{n}{ordered}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{EvA\PYZus{}Start}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{start\PYZus{}time}
        \PY{n}{ordered}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{EvB\PYZus{}Start}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{nn}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{start}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
        \PY{n}{ordered}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{EvA\PYZus{}End}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{end\PYZus{}time}
        \PY{n}{ordered}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{EvB\PYZus{}End}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{nn}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{end}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
        \PY{k}{del} \PY{n}{ordered}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Dummy}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
        \PY{n}{nns}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{ordered}\PY{p}{)}
  
    \PY{c+c1}{\PYZsh{}print(nns)}
    \PY{n}{result} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{concat}\PY{p}{(}\PY{n}{nns}\PY{p}{)}
    \PY{n}{result}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Delta}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{where}\PY{p}{(}\PY{n}{result}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{EvA\PYZus{}Start}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{==}\PY{n}{result}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{EvB\PYZus{}Start}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} 
                               \PY{l+m+mi}{0}\PY{p}{,}
                               \PY{p}{(}\PY{n}{result}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{EvB\PYZus{}Start}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZhy{}} \PY{n}{result}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{EvA\PYZus{}Start}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{)}
    \PY{n}{result}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Delta}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{result}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Delta}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{dt}\PY{o}{.}\PY{n}{total\PYZus{}seconds}\PY{p}{(}\PY{p}{)}
    \PY{k}{return} \PY{n}{result}

\PY{c+c1}{\PYZsh{}ds\PYZus{}1n\PYZus{}25s[\PYZsq{}Delta\PYZsq{}].dt.total\PYZus{}seconds()}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{6}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i add\PYZus{}DAY\PYZus{}WDWE\PYZus{}phaseII.py
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{23}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ds\PYZus{}1n\PYZus{}60s} \PY{o}{=} \PY{n}{id\PYZus{}delta}\PY{p}{(}\PY{n}{ds}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{,} \PY{n}{dt}\PY{o}{.}\PY{n}{timedelta}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{o}{\PYZhy{}}\PY{l+m+mi}{60}\PY{p}{)}\PY{p}{)}    \PY{c+c1}{\PYZsh{} Creating DS with specified time and n }
\PY{n}{ds\PYZus{}1n\PYZus{}60s} \PY{o}{=} \PY{n}{add\PYZus{}DAY\PYZus{}WDWE\PYZus{}phaseII}\PY{p}{(}\PY{n}{ds\PYZus{}1n\PYZus{}60s}\PY{p}{)}         \PY{c+c1}{\PYZsh{} Adding temporal features}
\PY{c+c1}{\PYZsh{} SHOULD I LIMIT TO 60 SECONDS?}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{24}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ds\PYZus{}1n\PYZus{}60s}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{n}{n}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{)} \PY{c+c1}{\PYZsh{} MENTION THAT OWING TO TIME CONSTAINTS, COULD NOT DO TEMPORAL EVALUATION}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, boxrule=.5pt, size=fbox, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{24}{\hspace{3.5pt}}
\begin{Verbatim}[commandchars=\\\{\}]
   EventA  EventB           EvA\_Start           EvB\_Start             EvA\_End  \textbackslash{}
0      67     100 2003-03-27 06:43:40 2003-03-27 06:44:06 2003-03-27 06:43:43
1     100     101 2003-03-27 06:44:06 2003-03-27 06:44:20 2003-03-27 06:44:07
2     101      57 2003-03-27 06:44:20 2003-03-27 06:44:35 2003-03-27 07:46:34
3      57      57 2003-03-27 06:44:35 2003-03-27 06:44:36 2003-03-27 06:44:48
4      57      67 2003-03-27 06:44:36 2003-03-27 06:44:49 2003-03-27 06:44:48
5      67      82 2003-03-27 06:44:49 2003-03-27 06:45:45 2003-03-27 06:44:56
6      82     146 2003-03-27 06:45:45 2003-03-27 06:46:12 2003-03-27 06:45:48
7     143     132 2003-03-27 06:54:09 2003-03-27 06:54:16 2003-03-27 06:54:14
8     141      93 2003-03-27 07:04:55 2003-03-27 07:05:22 2003-03-27 07:04:57
9      93     132 2003-03-27 07:05:22 2003-03-27 07:05:39 2003-03-27 07:05:24

              EvB\_End  Delta  DAY WDWE  Hour
0 2003-03-27 06:44:07   26.0  Thu   WD     6
1 2003-03-27 07:46:34   14.0  Thu   WD     6
2 2003-03-27 06:44:48   15.0  Thu   WD     6
3 2003-03-27 06:44:48    1.0  Thu   WD     6
4 2003-03-27 06:44:56   13.0  Thu   WD     6
5 2003-03-27 06:45:48   56.0  Thu   WD     6
6 2003-03-27 06:46:20   27.0  Thu   WD     6
7 2003-03-27 06:54:19    7.0  Thu   WD     6
8 2003-03-27 07:05:24   27.0  Thu   WD     7
9 2003-03-27 07:05:57   17.0  Thu   WD     7
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{15}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ds\PYZus{}10n\PYZus{}60s} \PY{o}{=} \PY{n}{id\PYZus{}delta}\PY{p}{(}\PY{n}{ds}\PY{p}{,} \PY{l+m+mi}{10}\PY{p}{,} \PY{n}{dt}\PY{o}{.}\PY{n}{timedelta}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{o}{\PYZhy{}}\PY{l+m+mi}{60}\PY{p}{)}\PY{p}{)}    \PY{c+c1}{\PYZsh{} Creating DS with specified time and n }
\PY{n}{ds\PYZus{}10n\PYZus{}60s} \PY{o}{=} \PY{n}{add\PYZus{}DAY\PYZus{}WDWE\PYZus{}phaseII}\PY{p}{(}\PY{n}{ds\PYZus{}10n\PYZus{}60s}\PY{p}{)}         \PY{c+c1}{\PYZsh{} Adding temporal features}
\PY{c+c1}{\PYZsh{} SHOULD I LIMIT TO 60 SECONDS?}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{19}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ds\PYZus{}10n\PYZus{}60s}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{n}{n}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{)} \PY{c+c1}{\PYZsh{} MENTION THAT OWING TO TIME CONSTAINTS, COULD NOT DO TEMPORAL EVALUATION}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, boxrule=.5pt, size=fbox, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{19}{\hspace{3.5pt}}
\begin{Verbatim}[commandchars=\\\{\}]
   EventA  EventB           EvA\_Start           EvB\_Start             EvA\_End  \textbackslash{}
0      67     100 2003-03-27 06:43:40 2003-03-27 06:44:06 2003-03-27 06:43:43
1      67     101 2003-03-27 06:43:40 2003-03-27 06:44:20 2003-03-27 06:43:43
2      67      57 2003-03-27 06:43:40 2003-03-27 06:44:35 2003-03-27 06:43:43
3      67      57 2003-03-27 06:43:40 2003-03-27 06:44:36 2003-03-27 06:43:43
4     100     101 2003-03-27 06:44:06 2003-03-27 06:44:20 2003-03-27 06:44:07
5     100      57 2003-03-27 06:44:06 2003-03-27 06:44:35 2003-03-27 06:44:07
6     100      57 2003-03-27 06:44:06 2003-03-27 06:44:36 2003-03-27 06:44:07
7     100      67 2003-03-27 06:44:06 2003-03-27 06:44:49 2003-03-27 06:44:07
8     101      57 2003-03-27 06:44:20 2003-03-27 06:44:35 2003-03-27 07:46:34
9     101      57 2003-03-27 06:44:20 2003-03-27 06:44:36 2003-03-27 07:46:34

              EvB\_End  Delta  DAY WDWE  Hour    Phase
0 2003-03-27 06:44:07   26.0  Thu   WD     6  Morning
1 2003-03-27 07:46:34   40.0  Thu   WD     6  Morning
2 2003-03-27 06:44:48   55.0  Thu   WD     6  Morning
3 2003-03-27 06:44:48   56.0  Thu   WD     6  Morning
4 2003-03-27 07:46:34   14.0  Thu   WD     6  Morning
5 2003-03-27 06:44:48   29.0  Thu   WD     6  Morning
6 2003-03-27 06:44:48   30.0  Thu   WD     6  Morning
7 2003-03-27 06:44:56   43.0  Thu   WD     6  Morning
8 2003-03-27 06:44:48   15.0  Thu   WD     6  Morning
9 2003-03-27 06:44:48   16.0  Thu   WD     6  Morning
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} SAVE THE CSV AND CB (below)!!!}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{sankey-diagrams---qualitative-assessment}{%
\subsection{Sankey Diagrams - Qualitative
Assessment}\label{sankey-diagrams---qualitative-assessment}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]

\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{9}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{genSankey}\PY{p}{(}\PY{n}{df}\PY{p}{,}\PY{n}{cat\PYZus{}cols}\PY{o}{=}\PY{p}{[}\PY{p}{]}\PY{p}{,}\PY{n}{value\PYZus{}cols}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Sankey Diagram}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
    \PY{c+c1}{\PYZsh{} maximum of 6 value cols \PYZhy{}\PYZgt{} 6 colors}
    \PY{n}{labelList} \PY{o}{=} \PY{p}{[}\PY{p}{]}
    \PY{n}{colorNumList} \PY{o}{=} \PY{p}{[}\PY{p}{]}
    \PY{k}{for} \PY{n}{catCol} \PY{o+ow}{in} \PY{n}{cat\PYZus{}cols}\PY{p}{:}
        \PY{n}{labelListTemp} \PY{o}{=}  \PY{n+nb}{list}\PY{p}{(}\PY{n+nb}{set}\PY{p}{(}\PY{n}{df}\PY{p}{[}\PY{n}{catCol}\PY{p}{]}\PY{o}{.}\PY{n}{values}\PY{p}{)}\PY{p}{)}
        \PY{n}{colorNumList}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{labelListTemp}\PY{p}{)}\PY{p}{)}
        \PY{n}{labelList} \PY{o}{=} \PY{n}{labelList} \PY{o}{+} \PY{n}{labelListTemp}
        
    \PY{c+c1}{\PYZsh{} remove duplicates from labelList}
    \PY{n}{labelList} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n+nb}{dict}\PY{o}{.}\PY{n}{fromkeys}\PY{p}{(}\PY{n}{labelList}\PY{p}{)}\PY{p}{)}
        
    \PY{n}{ds} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{S1Sensors\PYZus{}preprocessed.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{index\PYZus{}col} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{subActNum}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    
    \PY{n}{colorList} \PY{o}{=} \PY{p}{[}\PY{p}{]}
    \PY{k}{for} \PY{n}{subActNum} \PY{o+ow}{in} \PY{n}{labelList}\PY{p}{:}
        \PY{k}{if} \PY{n}{ds}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{subActNum}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{reqEnergy}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{:}
            \PY{n}{colorList}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{red}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
        \PY{k}{else}\PY{p}{:}
            \PY{n}{colorList}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{blue}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
    
    \PY{n}{newLabelList} \PY{o}{=} \PY{p}{[}\PY{p}{]}
    \PY{k}{for} \PY{n}{subActNum} \PY{o+ow}{in} \PY{n}{labelList}\PY{p}{:}
        \PY{n}{newLabelList}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{ds}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{subActNum}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{room}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ \PYZhy{} }\PY{l+s+s2}{\PYZdq{}} \PY{o}{+} \PY{n}{ds}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{subActNum}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{activity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
    
    \PY{c+c1}{\PYZsh{} transform df into a source\PYZhy{}target pair}
    \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{cat\PYZus{}cols}\PY{p}{)}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{:}
        \PY{k}{if} \PY{n}{i}\PY{o}{==}\PY{l+m+mi}{0}\PY{p}{:}
            \PY{n}{sourceTargetDf} \PY{o}{=} \PY{n}{df}\PY{p}{[}\PY{p}{[}\PY{n}{cat\PYZus{}cols}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{,}\PY{n}{cat\PYZus{}cols}\PY{p}{[}\PY{n}{i}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{,}\PY{n}{value\PYZus{}cols}\PY{p}{]}\PY{p}{]}
            \PY{n}{sourceTargetDf}\PY{o}{.}\PY{n}{columns} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{source}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{target}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{count}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
        \PY{k}{else}\PY{p}{:}
            \PY{n}{tempDf} \PY{o}{=} \PY{n}{df}\PY{p}{[}\PY{p}{[}\PY{n}{cat\PYZus{}cols}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{,}\PY{n}{cat\PYZus{}cols}\PY{p}{[}\PY{n}{i}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{,}\PY{n}{value\PYZus{}cols}\PY{p}{]}\PY{p}{]}
            \PY{n}{tempDf}\PY{o}{.}\PY{n}{columns} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{source}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{target}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{count}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
            \PY{n}{sourceTargetDf} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{concat}\PY{p}{(}\PY{p}{[}\PY{n}{sourceTargetDf}\PY{p}{,}\PY{n}{tempDf}\PY{p}{]}\PY{p}{)}
        \PY{n}{sourceTargetDf} \PY{o}{=} \PY{n}{sourceTargetDf}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{source}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{target}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{o}{.}\PY{n}{agg}\PY{p}{(}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{count}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sum}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}\PY{p}{)}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{p}{)}
        
    \PY{c+c1}{\PYZsh{} add index for source\PYZhy{}target pair}
    \PY{n}{sourceTargetDf}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sourceID}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{sourceTargetDf}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{source}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{apply}\PY{p}{(}\PY{k}{lambda} \PY{n}{x}\PY{p}{:} \PY{n}{labelList}\PY{o}{.}\PY{n}{index}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{)}
    \PY{n}{sourceTargetDf}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{targetID}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{sourceTargetDf}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{target}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{apply}\PY{p}{(}\PY{k}{lambda} \PY{n}{x}\PY{p}{:} \PY{n}{labelList}\PY{o}{.}\PY{n}{index}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{)}
    
    \PY{n}{labelList} \PY{o}{=} \PY{n}{newLabelList}
    
    \PY{c+c1}{\PYZsh{} creating the sankey diagram}
    \PY{n}{data} \PY{o}{=} \PY{n+nb}{dict}\PY{p}{(}\PY{n+nb}{type}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sankey}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
                \PY{n}{node} \PY{o}{=} \PY{n+nb}{dict}\PY{p}{(}\PY{n}{pad} \PY{o}{=} \PY{l+m+mi}{15}\PY{p}{,} \PY{n}{thickness} \PY{o}{=} \PY{l+m+mi}{20}\PY{p}{,} \PY{n}{line} \PY{o}{=} \PY{n+nb}{dict}\PY{p}{(}\PY{n}{color} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{black}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{width} \PY{o}{=} \PY{l+m+mf}{0.5}\PY{p}{)}\PY{p}{,}
                            \PY{n}{label} \PY{o}{=} \PY{n}{labelList}\PY{p}{,}
                            \PY{n}{color} \PY{o}{=} \PY{n}{colorList}\PY{p}{)}\PY{p}{,}
                \PY{n}{link} \PY{o}{=} \PY{n+nb}{dict}\PY{p}{(}\PY{n}{source} \PY{o}{=} \PY{n}{sourceTargetDf}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sourceID}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}
                            \PY{n}{target} \PY{o}{=} \PY{n}{sourceTargetDf}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{targetID}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}
                            \PY{n}{value} \PY{o}{=} \PY{n}{sourceTargetDf}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{count}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{)}
    
    \PY{n}{layout} \PY{o}{=}  \PY{n+nb}{dict}\PY{p}{(}\PY{n}{title} \PY{o}{=} \PY{n}{title}\PY{p}{,} \PY{n}{font} \PY{o}{=} \PY{n+nb}{dict}\PY{p}{(}\PY{n}{size} \PY{o}{=} \PY{l+m+mi}{10}\PY{p}{)}\PY{p}{)}
    \PY{n}{fig} \PY{o}{=} \PY{n+nb}{dict}\PY{p}{(}\PY{n}{data}\PY{o}{=}\PY{p}{[}\PY{n}{data}\PY{p}{]}\PY{p}{,} \PY{n}{layout}\PY{o}{=}\PY{n}{layout}\PY{p}{)}
    
    \PY{k}{return} \PY{n}{fig}
\PY{c+c1}{\PYZsh{} COLOUR \PYZhy{} https://stackoverflow.com/questions/55862005/plotly\PYZhy{}sankey\PYZhy{}diagram\PYZhy{}group\PYZhy{}label\PYZhy{}and\PYZhy{}color }
\PY{c+c1}{\PYZsh{} https://medium.com/plotly/4\PYZhy{}interactive\PYZhy{}sankey\PYZhy{}diagram\PYZhy{}made\PYZhy{}in\PYZhy{}python\PYZhy{}3057b9ee8616}
\PY{c+c1}{\PYZsh{} https://community.periscopedata.com/t/63nx0x/sankey\PYZhy{}diagrams\PYZhy{}with\PYZhy{}plot\PYZhy{}ly\PYZhy{}in\PYZhy{}periscope}
\PY{c+c1}{\PYZsh{} https://medium.com/kenlok/how\PYZhy{}to\PYZhy{}create\PYZhy{}sankey\PYZhy{}diagrams\PYZhy{}from\PYZhy{}dataframes\PYZhy{}in\PYZhy{}python\PYZhy{}e221c1b4d6b0}
\PY{c+c1}{\PYZsh{} https://community.periscopedata.com/t/k9s9mg/sankey\PYZhy{}plot\PYZhy{}ly}
\PY{c+c1}{\PYZsh{} https://plot.ly/python/sankey\PYZhy{}diagram/}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{13}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{}fig = genSankey(ds\PYZus{}1n\PYZus{}25s, cat\PYZus{}cols=[\PYZsq{}EventA\PYZsq{}, \PYZsq{}EventB\PYZsq{}], value\PYZus{}cols=\PYZsq{}Delta\PYZsq{}, title=\PYZsq{}ds\PYZsq{})}
\PY{c+c1}{\PYZsh{}py.iplot(go.Figure(fig))}
\PY{c+c1}{\PYZsh{} CLEAN UP \PYZhy{} SCALING + COLOURS + NUMBERS CONVERTED TO WORDS (or KEY?)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{25}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{wdwe\PYZus{}title} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{WD}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Weekday}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{WE}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Weekend}\PY{l+s+s2}{\PYZdq{}}\PY{p}{\PYZcb{}}

\PY{k}{def} \PY{n+nf}{addPhase}\PY{p}{(}\PY{n}{df}\PY{p}{)}\PY{p}{:}    
    \PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Phase}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Afternoon}\PY{l+s+s2}{\PYZdq{}}
    \PY{n}{df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Hour}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZlt{}} \PY{l+m+mi}{12}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Phase}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Morning}\PY{l+s+s2}{\PYZdq{}}
    \PY{n}{df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Hour}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{l+m+mi}{18}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Phase}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Evening}\PY{l+s+s2}{\PYZdq{}}

\PY{k}{def} \PY{n+nf}{plotASankey}\PY{p}{(}\PY{n}{df}\PY{p}{,} \PY{n}{wdwe}\PY{p}{,} \PY{n}{phase}\PY{p}{)}\PY{p}{:}
    \PY{n}{df} \PY{o}{=} \PY{n}{df}\PY{p}{[}\PY{p}{(}\PY{n}{df}\PY{o}{.}\PY{n}{WDWE}\PY{o}{==}\PY{n}{wdwe}\PY{p}{)} \PY{o}{\PYZam{}} \PY{p}{(}\PY{n}{df}\PY{o}{.}\PY{n}{Phase}\PY{o}{==}\PY{n}{phase}\PY{p}{)}\PY{p}{]}
    \PY{n}{fig} \PY{o}{=} \PY{n}{genSankey}\PY{p}{(}\PY{n}{df}\PY{p}{,} \PY{n}{cat\PYZus{}cols}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{EventA}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{EventB}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{value\PYZus{}cols}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Delta}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{n}{wdwe\PYZus{}title}\PY{p}{[}\PY{n}{wdwe}\PY{p}{]} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n}{phase}\PY{p}{)}
    \PY{n}{py}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{go}\PY{o}{.}\PY{n}{Figure}\PY{p}{(}\PY{n}{fig}\PY{p}{)}\PY{p}{,} \PY{n}{filename}\PY{o}{=}\PY{n}{wdwe\PYZus{}title}\PY{p}{[}\PY{n}{wdwe}\PY{p}{]} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n}{phase} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{.html}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

\PY{n}{addPhase}\PY{p}{(}\PY{n}{ds\PYZus{}1n\PYZus{}60s}\PY{p}{)}

\PY{k}{for} \PY{n}{wdwe} \PY{o+ow}{in} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{WD}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{WE}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{:}
    \PY{k}{for} \PY{n}{phase} \PY{o+ow}{in} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Morning}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Afternoon}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Evening}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{:}
        \PY{n}{plotASankey}\PY{p}{(}\PY{n}{ds\PYZus{}1n\PYZus{}60s}\PY{p}{,} \PY{n}{wdwe}\PY{p}{,} \PY{n}{phase}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{61}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} SEGMENT TIMES 3 for WD and WE}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{22}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{wdwe\PYZus{}title} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{WD}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Weekday}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{WE}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Weekend}\PY{l+s+s2}{\PYZdq{}}\PY{p}{\PYZcb{}}

\PY{k}{def} \PY{n+nf}{addPhase}\PY{p}{(}\PY{n}{df}\PY{p}{)}\PY{p}{:}    
    \PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Phase}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Afternoon}\PY{l+s+s2}{\PYZdq{}}
    \PY{n}{df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Hour}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZlt{}} \PY{l+m+mi}{12}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Phase}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Morning}\PY{l+s+s2}{\PYZdq{}}
    \PY{n}{df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Hour}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{l+m+mi}{18}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Phase}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Evening}\PY{l+s+s2}{\PYZdq{}}

\PY{k}{def} \PY{n+nf}{plotASankey}\PY{p}{(}\PY{n}{df}\PY{p}{,} \PY{n}{wdwe}\PY{p}{,} \PY{n}{phase}\PY{p}{)}\PY{p}{:}
    \PY{n}{df} \PY{o}{=} \PY{n}{df}\PY{p}{[}\PY{p}{(}\PY{n}{df}\PY{o}{.}\PY{n}{WDWE}\PY{o}{==}\PY{n}{wdwe}\PY{p}{)} \PY{o}{\PYZam{}} \PY{p}{(}\PY{n}{df}\PY{o}{.}\PY{n}{Phase}\PY{o}{==}\PY{n}{phase}\PY{p}{)}\PY{p}{]}
    \PY{n}{fig} \PY{o}{=} \PY{n}{genSankey}\PY{p}{(}\PY{n}{df}\PY{p}{,} \PY{n}{cat\PYZus{}cols}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{EventA}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{EventB}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{value\PYZus{}cols}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Delta}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{n}{wdwe\PYZus{}title}\PY{p}{[}\PY{n}{wdwe}\PY{p}{]} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n}{phase}\PY{p}{)}
    \PY{n}{py}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{go}\PY{o}{.}\PY{n}{Figure}\PY{p}{(}\PY{n}{fig}\PY{p}{)}\PY{p}{,} \PY{n}{filename}\PY{o}{=}\PY{n}{wdwe\PYZus{}title}\PY{p}{[}\PY{n}{wdwe}\PY{p}{]} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n}{phase} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{.html}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

\PY{n}{addPhase}\PY{p}{(}\PY{n}{ds\PYZus{}10n\PYZus{}60s}\PY{p}{)}

\PY{k}{for} \PY{n}{wdwe} \PY{o+ow}{in} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{WD}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{WE}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{:}
    \PY{k}{for} \PY{n}{phase} \PY{o+ow}{in} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Morning}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Afternoon}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Evening}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{:}
        \PY{n}{plotASankey}\PY{p}{(}\PY{n}{ds\PYZus{}10n\PYZus{}60s}\PY{p}{,} \PY{n}{wdwe}\PY{p}{,} \PY{n}{phase}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{import} \PY{n+nn}{gc}
\PY{n}{gc}\PY{o}{.}\PY{n}{collect}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{from} \PY{n+nn}{IPython} \PY{k}{import} \PY{n}{get\PYZus{}ipython}\PY{p}{;}   
\PY{n}{get\PYZus{}ipython}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{magic}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{reset \PYZhy{}sf}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{62}{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i Packages.py
\PY{o}{\PYZpc{}}\PY{k}{matplotlib} inline
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{timestamp-structure-with-boolean}{%
\subsection{Timestamp Structure with
Boolean}\label{timestamp-structure-with-boolean}}

    \hypertarget{constructing-boolean-array}{%
\subsubsection{Constructing Boolean
Array}\label{constructing-boolean-array}}

    \hypertarget{preprocessing}{%
\subsubsection{Preprocessing}\label{preprocessing}}

    \textbf{Input}
\texttt{ds\ =\ pd.read\_csv(\textquotesingle{}S1SubActivities\_preprocessed.csv\textquotesingle{},\ index\_col\ =\ None)}
\textbf{Output}
\texttt{ds.to\_csv(\textquotesingle{}S1SubActivities\_timeStampRanges.csv\textquotesingle{},index=False)}

\begin{itemize}
\tightlist
\item
  WHY
\end{itemize}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  This enables us to calculate the FREQUENCY per hour (which in the end
  was just used to inform later analysis)
\end{enumerate}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ds} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{PATH} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{/intermediate\PYZus{}datasets/S1SubActivities\PYZus{}temporalFeaturesPREPROCESSED.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
                 \PY{n}{index\PYZus{}col} \PY{o}{=} \PY{k+kc}{None}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ds}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{run} \PYZhy{}i addTemporalArrays.py
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ds}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ds}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{n}{PATH} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{/intermediate\PYZus{}datasets/S1SubActivities\PYZus{}timeStampRanges.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{index} \PY{o}{=} \PY{k+kc}{False}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ds} \PY{o}{=} \PY{n}{ds}\PY{o}{.}\PY{n}{set\PYZus{}index}\PY{p}{(}\PY{n}{start}\PY{p}{,} \PY{n}{drop} \PY{o}{=} \PY{k+kc}{True}\PY{p}{)}
\PY{n}{ds} \PY{o}{=} \PY{n}{ds}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{n}{columns} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{durationSec}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{subAct}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dayNumeric}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{DAY}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
                        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{WDWE}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{HOUR}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{timeStampList}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{start}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ds}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{s} \PY{o}{=} \PY{n}{ds}\PY{o}{.}\PY{n}{apply}\PY{p}{(}\PY{k}{lambda} \PY{n}{x}\PY{p}{:} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{n}{x}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{timeStampArrayList}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{,}\PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}\PY{o}{.}\PY{n}{stack}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{n}{level}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{drop}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
\PY{n}{s}\PY{o}{.}\PY{n}{name} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{duration}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{ds} \PY{o}{=} \PY{n}{ds}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{end}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{s}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ds}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{n}{n}\PY{o}{=}\PY{l+m+mi}{4}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ds} \PY{o}{=} \PY{n}{ds}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{n}{columns} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{timeStampArrayList}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ds}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{n}{PATH} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{/intermediate\PYZus{}datasets/S1SubActivities\PYZus{}timeRangeMelt.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{index}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ds} \PY{o}{=} \PY{n}{ds}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{n}{columns} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{subAct}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{actDuration}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]

\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\hspace{4pt}}
\begin{Verbatim}[commandchars=\\\{\}]

\end{Verbatim}
\end{tcolorbox}


    % Add a bibliography block to the postdoc
    
    
    
    \end{document}
